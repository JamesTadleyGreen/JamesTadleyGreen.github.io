<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Day I: Trebuchet?! - James Green</title>
        <link rel="stylesheet" href="../../css/variables.css" />
        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/syntax.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../../">James Tadley Green</a>
            </div>
            <nav>
                <a href="../../">Home</a>
                <a href="../../about.html">About</a>
                <a href="../../posts.html">Posts</a>
            </nav>
        </header>

        <main role="main">
            <h1 class="title">Day I: Trebuchet?!</h1>
            <section class="header">
    <ol class="post-info">
        
            <li>
                Last updated 2024-06-17 <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14c.6 0 1-.4 1-1V7c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v12c0 .6.4 1 1 1Zm3-7h0v0h0v0Zm4 0h0v0h0v0Zm4 0h0v0h0v0Zm-8 4h0v0h0v0Zm4 0h0v0h0v0Zm4 0h0v0h0v0Z"></path>
</svg>

            </li>
            <li>
                10 minute read <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path>
</svg>

            </li>
            <li>
                74b540b <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 0a4 4 0 0 1-4 4h-1a3 3 0 0 0-3 3"></path>
</svg>

            </li>
            <li>
               #<a class="tag" href="../../tags/AOC.html">AOC</a> #<a class="tag" href="../../tags/haskell.html">haskell</a> <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.6 8.4h0m-4.7 11.3-6.6-6.6a1 1 0 0 1 0-1.4l7.3-7.4a1 1 0 0 1 .7-.3H18a2 2 0 0 1 2 2v5.5a1 1 0 0 1-.3.7l-7.5 7.5a1 1 0 0 1-1.3 0Z"></path>
</svg>

            </li>
        
    </ol>
</section>

            <link rel="stylesheet" href="../../css/toc.css" />
<table class="toc">
    <tbody>
    
        
            <tr class="active-row">
                <td><a href="../../posts/advent_of_code_2023/1-day-1.html">1</a></td>
                <td><a href="../../posts/advent_of_code_2023/1-day-1.html">Day I: Trebuchet?!</a></td>
            </tr>
        
    
        
            <tr>
                <td><a href="../../posts/advent_of_code_2023/2-day-2.html">2</a></td>
                <td><a href="../../posts/advent_of_code_2023/2-day-2.html">Day II: Cube Conundrum</a></td>
            </tr>
        
    
        
            <tr>
                <td><a href="../../posts/advent_of_code_2023/3-day-3.html">3</a></td>
                <td><a href="../../posts/advent_of_code_2023/3-day-3.html">Day III: Gear Ratios</a></td>
            </tr>
        
    
    </tbody>
</table>

<link rel="stylesheet" href="../../css/post.css" />
<link rel="stylesheet" href="../../css/JetBrains-Mono.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>

<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<article>
    <!-- <section class="header">
    <ol class="post-info">
        
            <li>
                Last updated 2024-06-17 <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14c.6 0 1-.4 1-1V7c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v12c0 .6.4 1 1 1Zm3-7h0v0h0v0Zm4 0h0v0h0v0Zm4 0h0v0h0v0Zm-8 4h0v0h0v0Zm4 0h0v0h0v0Zm4 0h0v0h0v0Z"/>
</svg>

            </li>
            <li>
                7 minute read <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
</svg>

            </li>
            <li>
                74b540b <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 0a4 4 0 0 1-4 4h-1a3 3 0 0 0-3 3"/>
</svg>

            </li>
            <li>
               #<a class="tag" href="/tags/AOC.html">AOC</a> #<a class="tag" href="/tags/haskell.html">haskell</a> <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.6 8.4h0m-4.7 11.3-6.6-6.6a1 1 0 0 1 0-1.4l7.3-7.4a1 1 0 0 1 .7-.3H18a2 2 0 0 1 2 2v5.5a1 1 0 0 1-.3.7l-7.5 7.5a1 1 0 0 1-1.3 0Z"/>
</svg>

            </li>
        
    </ol>
</section>
 -->
    <section>
        <h1 data-number="1" id="trebuchet"><span class="header-section-number">1</span> <a href="https://adventofcode.com/2023/day/1">Trebuchet?!</a></h1>
<p>Compared to last year, this was a harder start. The crux of this problem was to parse a
string and filter out the first and last ‘number’.</p>
<h1 data-number="2" id="part-i"><span class="header-section-number">2</span> Part I</h1>
<h2 data-number="2.1" id="question"><span class="header-section-number">2.1</span> Question</h2>
<p>Given a string, search from the start and get the first number. The perform the same
from the end of the string. Concatenate these strings, and convert to <code>int</code>. Then sum
these numbers together.</p>
<pre><code>1abc2       -&gt; 12
pqr3stu8vwx -&gt; 37
a1b2c3d4e5f -&gt; 15
treb7uchet  -&gt; 77

answer = 12 + 37 + 15 + 77 = 142</code></pre>
<h2 data-number="2.2" id="my-solution"><span class="header-section-number">2.2</span> My Solution</h2>
<p>The general plan of attack is as follows:</p>
<ul>
<li>Create a parser to extract the first and last numbers from the string.</li>
<li>Concatenate these strings together and cast to int.</li>
<li>Convert the input into an iterable.</li>
<li>Fold over the iterable with the above parser summing as we go.</li>
</ul>
<div class="sourceCode" id="cb2" data-startFrom="15"><pre class="sourceCode numberSource numberLines haskell"><code class="sourceCode haskell" style="counter-reset: source-line 14;"><span id="cb2-15"><a href="#cb2-15"></a><span class="ot">parseInput ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> [<span class="dt">String</span>]</span>
<span id="cb2-16"><a href="#cb2-16"></a>parseInput <span class="ot">=</span> <span class="fu">lines</span></span>
<span id="cb2-17"><a href="#cb2-17"></a></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="ot">part1 ::</span> [<span class="dt">String</span>] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Int</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>part1 xs <span class="ot">=</span> <span class="dt">Just</span> <span class="op">$</span> <span class="fu">foldr</span> ((<span class="op">+</span>) <span class="op">.</span> firstAndLast) <span class="dv">0</span> xs</span>
<span id="cb2-20"><a href="#cb2-20"></a></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="ot">firstAndLast ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>firstAndLast s <span class="ot">=</span> <span class="fu">read</span> [first' s, first' (<span class="fu">reverse</span> s)]<span class="ot"> ::</span> <span class="dt">Int</span></span>
<span id="cb2-23"><a href="#cb2-23"></a></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="ot">first' ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Char</span></span>
<span id="cb2-25"><a href="#cb2-25"></a>first' [] <span class="ot">=</span> <span class="ch">'0'</span></span>
<span id="cb2-26"><a href="#cb2-26"></a>first' (x<span class="op">:</span>xs)</span>
<span id="cb2-27"><a href="#cb2-27"></a>  <span class="op">|</span> <span class="fu">isDigit</span> x <span class="ot">=</span> x</span>
<span id="cb2-28"><a href="#cb2-28"></a>  <span class="op">|</span> <span class="fu">otherwise</span> <span class="ot">=</span> first' xs</span></code></pre></div>
<h1 data-number="3" id="part-ii"><span class="header-section-number">3</span> Part II</h1>
<h2 data-number="3.1" id="question-1"><span class="header-section-number">3.1</span> Question</h2>
<p>Now we have a harder task, some of the numbers are spelt-out. This means we can’t do a
single pass (we actually can but the code is much more complex). The only part of the
above code we need to modify is our parser.</p>
<div class="sourceCode" id="cb3" data-startFrom="32"><pre class="sourceCode numberSource numberLines haskell"><code class="sourceCode haskell" style="counter-reset: source-line 31;"><span id="cb3-32"><a href="#cb3-32"></a>numbers <span class="ot">=</span></span>
<span id="cb3-33"><a href="#cb3-33"></a>  [ (<span class="st">&quot;one&quot;</span>, <span class="ch">'1'</span>)</span>
<span id="cb3-34"><a href="#cb3-34"></a>  , (<span class="st">&quot;two&quot;</span>, <span class="ch">'2'</span>)</span>
<span id="cb3-35"><a href="#cb3-35"></a>  , (<span class="st">&quot;three&quot;</span>, <span class="ch">'3'</span>)</span>
<span id="cb3-36"><a href="#cb3-36"></a>  , (<span class="st">&quot;four&quot;</span>, <span class="ch">'4'</span>)</span>
<span id="cb3-37"><a href="#cb3-37"></a>  , (<span class="st">&quot;five&quot;</span>, <span class="ch">'5'</span>)</span>
<span id="cb3-38"><a href="#cb3-38"></a>  , (<span class="st">&quot;six&quot;</span>, <span class="ch">'6'</span>)</span>
<span id="cb3-39"><a href="#cb3-39"></a>  , (<span class="st">&quot;seven&quot;</span>, <span class="ch">'7'</span>)</span>
<span id="cb3-40"><a href="#cb3-40"></a>  , (<span class="st">&quot;eight&quot;</span>, <span class="ch">'8'</span>)</span>
<span id="cb3-41"><a href="#cb3-41"></a>  , (<span class="st">&quot;nine&quot;</span>, <span class="ch">'9'</span>)</span>
<span id="cb3-42"><a href="#cb3-42"></a>  ]</span>
<span id="cb3-43"><a href="#cb3-43"></a></span>
<span id="cb3-44"><a href="#cb3-44"></a><span class="ot">part2 ::</span> [<span class="dt">String</span>] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Int</span></span>
<span id="cb3-45"><a href="#cb3-45"></a>part2 xs <span class="ot">=</span> <span class="dt">Just</span> <span class="op">$</span> <span class="fu">foldr</span> ((<span class="op">+</span>) <span class="op">.</span> firstAndLast') <span class="dv">0</span> xs</span>
<span id="cb3-46"><a href="#cb3-46"></a></span>
<span id="cb3-47"><a href="#cb3-47"></a><span class="ot">firstAndLast' ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb3-48"><a href="#cb3-48"></a>firstAndLast' s <span class="ot">=</span> <span class="fu">read</span> [first'' s, last'' s]<span class="ot"> ::</span> <span class="dt">Int</span></span>
<span id="cb3-49"><a href="#cb3-49"></a></span>
<span id="cb3-50"><a href="#cb3-50"></a><span class="ot">generalFirst'' ::</span> [(<span class="dt">String</span>, <span class="dt">Char</span>)] <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Char</span></span>
<span id="cb3-51"><a href="#cb3-51"></a>generalFirst'' _ [] <span class="ot">=</span> <span class="ch">'0'</span></span>
<span id="cb3-52"><a href="#cb3-52"></a>generalFirst'' kvs y<span class="op">@</span>(x<span class="op">:</span>xs)</span>
<span id="cb3-53"><a href="#cb3-53"></a>  <span class="op">|</span> <span class="fu">isDigit</span> x <span class="ot">=</span> x</span>
<span id="cb3-54"><a href="#cb3-54"></a>  <span class="op">|</span> <span class="fu">otherwise</span> <span class="ot">=</span></span>
<span id="cb3-55"><a href="#cb3-55"></a>    <span class="kw">case</span> checkString y kvs <span class="kw">of</span></span>
<span id="cb3-56"><a href="#cb3-56"></a>      <span class="dt">Just</span> n <span class="ot">-&gt;</span> n</span>
<span id="cb3-57"><a href="#cb3-57"></a>      <span class="dt">Nothing</span> <span class="ot">-&gt;</span> generalFirst'' kvs xs</span>
<span id="cb3-58"><a href="#cb3-58"></a></span>
<span id="cb3-59"><a href="#cb3-59"></a><span class="ot">first'' ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Char</span></span>
<span id="cb3-60"><a href="#cb3-60"></a>first'' <span class="ot">=</span> generalFirst'' numbers</span>
<span id="cb3-61"><a href="#cb3-61"></a></span>
<span id="cb3-62"><a href="#cb3-62"></a><span class="ot">last'' ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Char</span></span>
<span id="cb3-63"><a href="#cb3-63"></a>last'' s <span class="ot">=</span> generalFirst'' (<span class="fu">map</span> (\(x, y) <span class="ot">-&gt;</span> (<span class="fu">reverse</span> x, y)) numbers) (<span class="fu">reverse</span> s)</span>
<span id="cb3-64"><a href="#cb3-64"></a></span>
<span id="cb3-65"><a href="#cb3-65"></a><span class="ot">checkString ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> [(<span class="dt">String</span>, <span class="dt">Char</span>)] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">Char</span></span>
<span id="cb3-66"><a href="#cb3-66"></a>checkString s (k<span class="op">:</span>ks) <span class="ot">=</span></span>
<span id="cb3-67"><a href="#cb3-67"></a>  <span class="kw">if</span> isPrefixOf (<span class="fu">fst</span> k) s</span>
<span id="cb3-68"><a href="#cb3-68"></a>    <span class="kw">then</span> <span class="dt">Just</span> (<span class="fu">snd</span> k)</span>
<span id="cb3-69"><a href="#cb3-69"></a>    <span class="kw">else</span> checkString s ks</span>
<span id="cb3-70"><a href="#cb3-70"></a></span>
<span id="cb3-71"><a href="#cb3-71"></a>checkString _ _ <span class="ot">=</span> <span class="dt">Nothing</span></span></code></pre></div>
<p>This looks worse than it actually is, at each step we check if the string is in our
<code>numbers</code> map. If it is, we return the number. If not, we continue.</p>
<h1 data-number="4" id="others-solutions"><span class="header-section-number">4</span> Others Solutions</h1>
<blockquote class="reddit-embed-bq" data-embed-showtitle="true" data-embed-theme="dark" data-embed-height="833">
<a href="https://www.reddit.com/r/haskell/comments/1885snc/comment/kbjvg1k/">Comment</a><br> by<a href="https://www.reddit.com/user/NonFunctionalHuman/">u/NonFunctionalHuman</a> from discussion<a href="https://www.reddit.com/r/haskell/comments/1885snc/advent_of_code_day_one_solution/"><no value></no></a><br> in<a href="https://www.reddit.com/r/haskell/">haskell</a>
</blockquote>
<script async src="https://embed.reddit.com/widgets.js" charset="UTF-8"></script>
    </section>
</article>


        </main>

        <footer>
            © 2023, James Green
        </footer>
    </body>
</html>
